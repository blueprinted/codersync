#!/bin/sh

pwd=$(cd $(dirname $0); pwd)
source ${pwd}/../common.sh

if [ $# -lt 1 ] ; then
	echo "argu less than 1"
	exit
fi

file=$1

if [ "$1" = "--force" ] ; then
	file="";
fi

URL='http://api.cms.shouji.sogou/api?sid=66272,77681&type=data'

source ${shell_dir}/get_servers_ip.sh

#servers=(
#	'10.134.99.165'
#	'10.134.106.230'
#	'10.142.32.222'
#	'10.134.91.190'
#	'10.134.106.174'
#	'10.134.107.159'
#	'10.134.104.210'
#	'10.134.119.183'
#	'10.134.111.214'
#	'10.134.109.173'
#	'10.142.34.209'
#	'10.134.106.164'
#	'10.134.99.134'
#	'10.134.97.225'
#	'10.134.116.217'
#	'10.134.98.146'
#	'10.134.89.238'
#	'10.134.108.218'
#	'10.134.105.156'
#	'10.134.103.227'
#	'10.142.61.200'
#	'10.134.104.227'
#	'10.134.104.178'
#	'10.134.101.198'
#	'10.134.116.173'
#	'10.134.109.221'
#	'10.134.101.180'
#	'10.134.111.200'
#	'10.134.100.197'
#	'10.134.99.218'
#	'10.134.105.159'
#	'10.134.104.229'
#	'10.134.106.135'
#	'10.134.111.198'
#	'10.134.106.147'
#	'10.134.111.230'
#	'10.134.109.187'
#)

for server in ${servers[@]}
do
	rsync -avzL --exclude=.svn /search/nginx/html/dt_pinyin/yadie/data/webdata/srv.android/${file} odin@${server}::odin/search/odin/webdata/${file}
done

exit;
